{"version":3,"sources":["./src/app/post-form/post-form-routing.module.ts","./src/app/post-form/post-form.module.ts","./src/app/post-form/post-form.page.ts","./src/app/post-form/post-form.page.scss","./src/app/post-form/post-form.page.html"],"names":[],"mappings":"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","file":"src_app_post-form_post-form_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { PostFormPage } from './post-form.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PostFormPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class PostFormPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { PostFormPage } from './post-form.page';\r\n\r\nimport { PostFormPageRoutingModule } from './post-form-routing.module';\r\n\r\nimport { SharedComponentsModule } from '../components/shared-components.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    PostFormPageRoutingModule,\r\n    SharedComponentsModule\r\n  ],\r\n  declarations: [\r\n    PostFormPage\r\n  ]\r\n})\r\nexport class PostFormPageModule {}\r\n","import { ActivatedRoute } from '@angular/router';\r\nimport { ApiService } from '../services/api/api.service';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ControllerService } from '../services/controller/controller.service';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { SearchPage } from '../modals/search/search.page';\r\n\r\n@Component({\r\n    selector: 'app-post-form',\r\n    templateUrl: './post-form.page.html',\r\n    styleUrls: ['./post-form.page.scss'],\r\n})\r\nexport class PostFormPage implements OnInit {\r\n\r\n    id: string = null;\r\n    loader: boolean = false;\r\n    departments: any = [];\r\n    project: any = {\r\n        id: '',\r\n        name: ''\r\n    };\r\n    data: any = {\r\n        project_id: '',\r\n        department_id: '',\r\n        post: ''\r\n    };\r\n\r\n    constructor(\r\n        private route: ActivatedRoute,\r\n        private api: ApiService,\r\n        private controller: ControllerService,\r\n        private modalCtrl: ModalController,\r\n    ) {\r\n\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.loader = true;\r\n        this.api.get(`hr-data`)\r\n        .subscribe(\r\n            (res: any) => {\r\n                this.departments = res.data.departments;\r\n\r\n                // Check parameters for employee id\r\n                this.route.params.subscribe(params => {\r\n                    this.id = params.id;\r\n                    if(this.id !== null && this.id !== undefined) {\r\n                        // get employee information\r\n                        this.api.get(`posts/${this.id}`)\r\n                        .subscribe(\r\n                            (res: any) => {\r\n                                this.loader = false;\r\n                                this.project = res.data.project_id ? res.data.project_id : {id: '', name: ''};\r\n                                this.data.department_id = res.data.department_id;\r\n                                this.data.post = res.data.post;\r\n                            },\r\n                            (err) => {\r\n                                this.controller.showErrorAlert(err);\r\n                                this.loader = false;\r\n                            }\r\n                        );\r\n                    } else {\r\n                        this.loader = false;\r\n                    }\r\n                });\r\n            },\r\n            (err) => {\r\n                this.controller.showErrorAlert(err);\r\n                this.loader = false;\r\n            }\r\n        );\r\n    }\r\n\r\n    save() {\r\n        let url = '';\r\n\r\n        if(this.id !== null && this.id !== undefined) {\r\n            url = `posts/update/${this.id}`;\r\n        } else {\r\n            url = `posts/store`;\r\n        }\r\n\r\n        this.data.project_id = this.project.id;\r\n\r\n        this.controller.presentLoading('Saving, please wait...')\r\n        .then((loading) => {\r\n            this.api.post(url, this.data)\r\n            .subscribe(\r\n                (res: any) => {\r\n                    loading.dismiss();\r\n                    if(this.id == null || this.id == undefined) {\r\n                        this.data = {\r\n                            project_id: '',\r\n                            department_id: '',\r\n                            post: ''\r\n                        };\r\n                        this.project = {\r\n                            id: '',\r\n                            name: ''\r\n                        };\r\n                    }\r\n                    this.controller.presentAlert('Success', res.message);\r\n                },\r\n                (err: any) => {\r\n                    loading.dismiss();\r\n                    this.controller.showErrorAlert(err);\r\n                }\r\n            )\r\n        });\r\n    }\r\n\r\n    async searchProject() {\r\n        const modal = await this.modalCtrl.create({\r\n            component: SearchPage,\r\n            componentProps: {\r\n                title: 'Search Project',\r\n                url: 'projects?get=true&limit=20&keyword=',\r\n                defaultLabel: 'All Project/No Project',\r\n                defaultValue: ''\r\n\r\n            }\r\n        });\r\n\r\n        await modal.present();\r\n\r\n        const { data } = await modal.onWillDismiss();\r\n        if (data !== undefined) {\r\n            console.log(data);\r\n            this.project = data.data;\r\n        }\r\n    }\r\n\r\n    selectDepartment(e) {\r\n        this.data.department_id = e.srcElement.value;\r\n    }\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwb3N0LWZvcm0ucGFnZS5zY3NzIn0= */\";","export default \"<app-navbar [title]=\\\"'ANNOUNCEMENTS'\\\" [icon]=\\\"'newspaper-outline'\\\" [loader]=\\\"loader\\\">\\r\\n    <div content>\\r\\n        <button class=\\\"surelog-btn secondary-bg shadow border-0 right\\\" (click)=\\\"save()\\\">\\r\\n            <ion-icon name=\\\"save-outline\\\"></ion-icon>\\r\\n            &nbsp;\\r\\n            <label>Save Announcement</label>\\r\\n        </button>\\r\\n        {{id == undefined || id == null ? 'Create' : 'Edit'}} Announcement\\r\\n        <br><br>\\r\\n\\r\\n        <div class=\\\"row\\\">\\r\\n            <div class=\\\"col-lg-4 col-md-6 col-12\\\">\\r\\n                <label class=\\\"text-muted\\\">Post to specific department only</label>\\r\\n                <ion-select placeholder=\\\"Select Department\\\" class=\\\"form-control form-control-sm\\\" value=\\\"{{data.department_id}}\\\" (ionChange)=\\\"selectDepartment($event)\\\">\\r\\n                    <ion-select-option value=\\\"\\\">All Departments</ion-select-option>\\r\\n                    <ion-select-option value=\\\"{{department.id}}\\\" *ngFor=\\\"let department of departments\\\">\\r\\n                        {{department.name}}\\r\\n                    </ion-select-option>\\r\\n                </ion-select>\\r\\n                <br>\\r\\n            </div>\\r\\n            <div class=\\\"col-lg-4 col-md-6 col-12\\\">\\r\\n                <label class=\\\"text-muted\\\">Post to specific project group</label>\\r\\n                <input type=\\\"text\\\" class=\\\"form-control form-control-sm bg-light\\\" [(ngModel)]=\\\"project.name\\\" readonly placeholder=\\\"Click to search\\\" (click)=\\\"searchProject()\\\" style=\\\"cursor: pointer;\\\">\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"row\\\">\\r\\n            <div class=\\\"col-lg-8 col-md-12 col-12\\\">\\r\\n                <label class=\\\"text-muted\\\">Write an announcement</label>\\r\\n                <textarea class=\\\"form-control form-control-sm\\\" [(ngModel)]=\\\"data.post\\\" rows=\\\"30\\\"></textarea>\\r\\n                <br>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</app-navbar>\";"],"sourceRoot":"webpack:///"}