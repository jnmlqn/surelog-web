{"version":3,"sources":["./src/app/home/home-routing.module.ts","./src/app/home/home.module.ts","./src/app/home/home.page.ts","./src/app/home/home.page.scss","./src/app/home/home.page.html"],"names":[],"mappings":"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","file":"src_app_home_home_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { HomePage } from './home.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: HomePage,\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class HomePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HomePage } from './home.page';\r\n\r\nimport { HomePageRoutingModule } from './home-routing.module';\r\n\r\nimport { SharedComponentsModule } from '../components/shared-components.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    HomePageRoutingModule,\r\n    SharedComponentsModule\r\n  ],\r\n  declarations: [\r\n    HomePage\r\n  ]\r\n})\r\nexport class HomePageModule {}\r\n","import { ApiService } from '../services/api/api.service';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ControllerService } from '../services/controller/controller.service';\r\nimport { MenuController } from '@ionic/angular';\r\n\r\n@Component({\r\n    selector: 'app-home',\r\n    templateUrl: './home.page.html',\r\n    styleUrls: ['./home.page.scss'],\r\n})\r\nexport class HomePage implements OnInit {\r\n\r\n    keyword:string = '';\r\n    date:string = '';\r\n    limit:string = '10';\r\n    page: number = 1;\r\n    search: any = null;\r\n    sortBy: string = 'created_at';\r\n    sorting: string = 'desc';\r\n    audit_trails:any = {\r\n        data: {\r\n            data: null\r\n        }\r\n    };\r\n    loader: boolean = false;\r\n\r\n    constructor(\r\n        private api: ApiService,\r\n        private controller: ControllerService,\r\n        private menuCtrl: MenuController,\r\n    ) { \r\n        \r\n    }\r\n\r\n    ngOnInit() {\r\n        \r\n    }\r\n\r\n    ionViewWillEnter() {\r\n        this.getAuditTrails();\r\n        this.menuCtrl.enable(true);\r\n    }\r\n\r\n    getAuditTrails() {\r\n        this.loader = true;\r\n        this.api.get(`audit-trails?page=${this.page}&keyword=${this.keyword}&sortBy=${this.sortBy}&sorting=${this.sorting}&date=${this.date}&limit=${this.limit}`)\r\n        .subscribe(\r\n            (res: any) => {\r\n                this.loader = false;\r\n                this.audit_trails = res;\r\n            },\r\n            (err: any) => {\r\n                this.loader = false;\r\n                this.controller.showErrorAlert(err);\r\n            }\r\n        ); \r\n    }\r\n\r\n    paginate(page) {\r\n        if(page == 'pagination.previous') {\r\n            this.page--;\r\n        } else if(page == 'pagination.next') {\r\n            this.page++;\r\n        } else {\r\n            this.page = page;\r\n        }\r\n\r\n        this.getAuditTrails();\r\n    }\r\n\r\n    startSearch() {\r\n        this.page = 1;\r\n        clearTimeout(this.search);\r\n        this.search = setTimeout(() => {\r\n            this.getAuditTrails();\r\n        }, 1000);\r\n    }\r\n\r\n    sortData(sortBy) {\r\n        this.sortBy = sortBy;\r\n        this.sorting = this.sorting == 'desc' ? 'asc' : 'desc';\r\n        this.getAuditTrails();\r\n    }\r\n\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJob21lLnBhZ2Uuc2NzcyJ9 */\";","export default \"<app-navbar [title]=\\\"'AUDIT TRAIL'\\\" [icon]=\\\"'bar-chart-outline'\\\" [loader]=\\\"loader\\\">\\r\\n    <div content>\\r\\n        Browse Audit Trails\\r\\n        <br><br>\\r\\n        <div class=\\\"row\\\">\\r\\n            <div class=\\\"col-md-3 mt-1\\\">\\r\\n                <label>Search</label>\\r\\n                <input type=\\\"text\\\" class=\\\"form-control form-control-sm\\\" [(ngModel)]=\\\"keyword\\\" placeholder=\\\"Search\\\" (input)=\\\"startSearch()\\\">\\r\\n            </div>\\r\\n            <div class=\\\"col-md-3 mt-1\\\">\\r\\n                <label>Select Date</label>\\r\\n                <input type=\\\"date\\\" class=\\\"form-control form-control-sm\\\" [(ngModel)]=\\\"date\\\" (input)=\\\"startSearch()\\\">\\r\\n            </div>\\r\\n        </div>\\r\\n        <br><br>\\r\\n        <div style=\\\"overflow: auto\\\">\\r\\n            <table class=\\\"table table-hover table-borderless data-table\\\">\\r\\n                <thead>\\r\\n                    <tr>\\r\\n                        <th class=\\\"text-muted\\\">\\r\\n                            Employee Name\\r\\n                        </th>\\r\\n                        <th class=\\\"text-muted\\\">\\r\\n                            <span class=\\\"pointer sort\\\" (click)=\\\"sortData('module')\\\">\\r\\n                                Module\\r\\n                                <ion-icon name=\\\"chevron-{{sorting == 'desc' && sortBy == 'module' ? 'down' : 'up'}}-outline\\\"></ion-icon>\\r\\n                            </span>\\r\\n                        </th>\\r\\n                        <th class=\\\" text-muted\\\">\\r\\n                            <span class=\\\"pointer sort\\\" (click)=\\\"sortData('message')\\\">\\r\\n                                Activity\\r\\n                                <ion-icon name=\\\"chevron-{{sorting == 'desc' && sortBy == 'message' ? 'down' : 'up'}}-outline\\\"></ion-icon>\\r\\n                            </span>\\r\\n                        </th>\\r\\n                        <th class=\\\" text-muted\\\">\\r\\n                            <span class=\\\"pointer sort\\\" (click)=\\\"sortData('created_at')\\\">\\r\\n                                Date & Time\\r\\n                                <ion-icon name=\\\"chevron-{{sorting == 'desc' && sortBy == 'created_at' ? 'down' : 'up'}}-outline\\\"></ion-icon>\\r\\n                            </span>\\r\\n                        </th>\\r\\n                    </tr>\\r\\n                </thead>\\r\\n                <tbody>\\r\\n                    <tr *ngFor=\\\"let audit_trails of audit_trails.data.data\\\" class=\\\"bg-light data-row\\\">\\r\\n                        <th width=\\\"25%\\\">\\r\\n                            {{audit_trails.user_id ? (audit_trails.user_id.first_name + ' ' + audit_trails.user_id.last_name) : 'Deleted User'}}\\r\\n                        </th>\\r\\n                        <th width=\\\"25%\\\">{{audit_trails.module}}</th>\\r\\n                        <th width=\\\"25%\\\">{{audit_trails.message}}</th>\\r\\n                        <th width=\\\"25%\\\">\\r\\n                            {{audit_trails.created_at | date: 'MMMM dd, yyyy'}}<br>\\r\\n                            {{audit_trails.created_at | date: 'hh:mm:ss a'}}\\r\\n                        </th>\\r\\n                    </tr>\\r\\n                </tbody>\\r\\n                <tfoot>\\r\\n                    <tr class=\\\"bg-light data-row\\\">\\r\\n                        <th>\\r\\n                            <div class=\\\"row g-3 align-items-center\\\">\\r\\n                                <div class=\\\"col-auto\\\">\\r\\n                                    <label class=\\\"col-form-label\\\">Show</label>\\r\\n                                </div>\\r\\n                                <div class=\\\"col-auto p-0\\\">\\r\\n                                    <ion-select class=\\\"form-control form-control-sm\\\" [(ngModel)]=\\\"limit\\\" (ionChange)=\\\"paginate(1)\\\">\\r\\n                                        <ion-select-option value=\\\"5\\\">5</ion-select-option>\\r\\n                                        <ion-select-option value=\\\"10\\\">10</ion-select-option>\\r\\n                                        <ion-select-option value=\\\"15\\\">15</ion-select-option>\\r\\n                                        <ion-select-option value=\\\"20\\\">20</ion-select-option>\\r\\n                                    </ion-select>\\r\\n                                </div>\\r\\n                                <div class=\\\"col-auto\\\">\\r\\n                                <span>\\r\\n                                    per page\\r\\n                                </span>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </th>\\r\\n                        <th colspan=\\\"3\\\" style=\\\"vertical-align: middle !important;\\\">\\r\\n                            <div class=\\\"right\\\" *ngIf=\\\"audit_trails.data.last_page > 1\\\">\\r\\n                                <button class=\\\"btn shadow m-1 paginate-btn {{link.active ? 'active' : ''}}\\\" [disabled]=\\\"link.url == null\\\" *ngFor=\\\"let link of audit_trails.data.links\\\" (click)=\\\"paginate(link.label)\\\">\\r\\n                                    {{link.label == 'pagination.previous' ? '<' : (link.label == 'pagination.next' ? '>' : link.label)}}\\r\\n                                </button>\\r\\n                            </div>\\r\\n                        </th>\\r\\n                    </tr>\\r\\n                </tfoot>\\r\\n            </table>\\r\\n        </div>\\r\\n    </div>\\r\\n</app-navbar>\";"],"sourceRoot":"webpack:///"}